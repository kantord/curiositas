(()=>{let e,t,a;let i=0,d=2,r=0;function o(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),l=d-r;if(l>=33.333333333333336){t.clearRect(0,0,e.width,e.height),t.fillStyle=a.backgroundColor,t.fillRect(0,0,e.width,e.height),n(0);let o=t.getImageData(0,0,e.width/2,e.height);n(Math.round(2*Math.PI*(.32*a.renderWidth))/2);let h=t.getImageData(e.width/2,0,e.width/2,e.height);t.putImageData(o,0,0),t.putImageData(h,e.width/2,0);let g=new OffscreenCanvas(a.displayWidth,a.displayHeight).getContext("2d");g.drawImage(e,0,0,e.width,e.height,0,0,a.displayWidth,a.displayHeight);let s=g.getImageData(0,0,a.displayWidth,a.displayHeight);i+=a.rotationSpeed*(l/33.333333333333336),self.postMessage({type:"frame",imageData:{data:s.data,width:a.displayWidth,height:a.displayHeight}},[s.data.buffer]),r=d}requestAnimationFrame(o)}function n(e){let d=a.renderWidth,r=a.renderHeight,o=d/2,n=r/2,h=.32*Math.min(d,r),g=Math.round(2*Math.PI*h),s=a.renderWidth*a.squareSizeFactor,c=a.renderWidth*a.dotRadiusFactor,f=a.renderWidth*a.edgeThicknessFactor;for(let d=0;d<g;d++){let r=(d+e)%g/g*2*Math.PI,u=o+h*Math.cos(r),y=n+h*Math.sin(r),p=[l(-s/2,-s/2,i),l(s/2,-s/2,i),l(s/2,s/2,i),l(-s/2,s/2,i)];t.lineWidth=f,t.lineCap="round",t.lineJoin="round";for(let e=0;e<p.length;e++)t.strokeStyle=a.edgeColors[e],t.beginPath(),t.moveTo(u+p[e].x,y+p[e].y),t.lineTo(u+p[(e+1)%4].x,y+p[(e+1)%4].y),t.stroke();t.fillStyle=a.dotColor,p.forEach(e=>{t.beginPath(),t.arc(u+e.x,y+e.y,c,0,2*Math.PI),t.fill()})}}function l(e,t,a){return{x:e*Math.cos(a)-t*Math.sin(a),y:e*Math.sin(a)+t*Math.cos(a)}}self.onmessage=i=>{if("init"===i.data.type){let{width:n,height:l,cssColors:h,oversampling:g}=i.data;d=g||2,function(i,n,l){(t=(e=new OffscreenCanvas(i*d,n*d)).getContext("2d",{willReadFrequently:!0})).imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",a={displayWidth:i,displayHeight:n,renderWidth:i*d,renderHeight:n*d,edgeColors:[l["--red-500"],l["--blue-500"],l["--green-500"],l["--purple-500"]],rotationSpeed:.01,squareSizeFactor:.16,dotRadiusFactor:.05,edgeThicknessFactor:.09375,backgroundColor:l["--gray-100"],dotColor:l["--gray-900"]},r=performance.now(),o()}(n,l,h)}else if("updateColors"===i.data.type)!function(e){a.edgeColors=[e["--red-500"],e["--blue-500"],e["--green-500"],e["--purple-500"]],a.backgroundColor=e["--gray-100"],a.dotColor=e["--gray-900"]}(i.data.cssColors);else if("resize"===i.data.type){let{width:r,height:n,oversampling:l}=i.data;d=l||2,function(i,r){(t=(e=new OffscreenCanvas(i*d,r*d)).getContext("2d",{willReadFrequently:!0})).imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",a.displayWidth=i,a.displayHeight=r,a.renderWidth=i*d,a.renderHeight=r*d,o(performance.now())}(r,n)}},_N_E={}})();